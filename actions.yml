---
name: Deploy to AWS CloudFront
description:
inputs:
  bucket:
    description: S3 Bucket Name
    required: true
  cf_dist:
    description: CloudFront distribution
    required: true
runs:
  using: 'composite'
  steps:
    - run: aws s3 rm s3://${{ inputs.bucket }}/ --recursive --region eu-west-1 --exclude "web-components/*"
      shell: bash
    - run: aws s3 cp dist s3://${{ inputs.bucket }} --recursive --region eu-west-1
      shell: bash
    - run: aws cloudfront create-invalidation --distribution-id ${{ inputs.cf_dist }} --paths "/css" "/fonts" "/images" "/js" "/favicon.ico" "/index.html"
      shell: bash
